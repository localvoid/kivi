<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Reactive Bindings | kivi</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../experimental/01_incremental_rendering.html" />
    
    
    <link rel="prev" href="../advanced/05_events.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3.6"
        data-chapter-title="Reactive Bindings"
        data-filepath="advanced/06_reactive_bindings.md"
        data-basepath=".."
        data-revision="Wed Sep 07 2016 14:55:59 GMT+0700 (+07)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01_getting_started.html">
            
                
                    <a href="../01_getting_started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting Started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Basics</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="basics/01_components.html">
            
                
                    <a href="../basics/01_components.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="basics/02_virtual_dom.html">
            
                
                    <a href="../basics/02_virtual_dom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Virtual DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Advanced</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="advanced/01_element_descriptor.html">
            
                
                    <a href="../advanced/01_element_descriptor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Element Descriptor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="advanced/02_scheduler.html">
            
                
                    <a href="../advanced/02_scheduler.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Scheduler
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="advanced/03_components.html">
            
                
                    <a href="../advanced/03_components.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="advanced/04_virtual_dom.html">
            
                
                    <a href="../advanced/04_virtual_dom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Virtual DOM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="advanced/05_events.html">
            
                
                    <a href="../advanced/05_events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Events
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="3.6" data-path="advanced/06_reactive_bindings.html">
            
                
                    <a href="../advanced/06_reactive_bindings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Reactive Bindings
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Experimental</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="experimental/01_incremental_rendering.html">
            
                
                    <a href="../experimental/01_incremental_rendering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Incremental Rendering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >kivi</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="reactive-bindings">Reactive Bindings</h1>
<p>Reactive bindings in kivi are implemented with a simple <code>Invalidator</code> objects, UI Components can subscribe and listen
for invalidation signals with methods <code>subscribe</code> and <code>transientSubscribe</code>. The difference between subscriptions and
transient subscriptions is that transient subscriptions will be automatically canceled when UI Component is invalidated,
so UI Component should resubscribe each time it updates its representation, transient subscriptions are useful when
subscriptions may change over time.</p>
<p>Invalidator objects are way much simpler than composable streams, or implicit graphs of data dependencies, they
doesn&apos;t pass any information except the signal that something is changed. Because all subscriptions are explicit it also
has a predictable performance and it is easier to review code.</p>
<p>It was designed to get rid of data changes over time in as much places as possible, so instead of pushing/pulling
data from streams, we just reevaluate everything and using caches to prevent from unnecessary computations. This
programming model is significantly simpler and provides a better debugging experience, especially when investigating
bugs from stack traces in production builds.</p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> mode: <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> = <span class="hljs-string">&quot;a&quot;</span>;
<span class="hljs-keyword">const</span> a = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> b = <span class="hljs-number">0</span>;
<span class="hljs-keyword">const</span> modeInvalidator = <span class="hljs-keyword">new</span> Invalidator();
<span class="hljs-keyword">const</span> aInvalidator = <span class="hljs-keyword">new</span> Invalidator();
<span class="hljs-keyword">const</span> bInvalidator = <span class="hljs-keyword">new</span> Invalidator();

<span class="hljs-keyword">const</span> Main = <span class="hljs-keyword">new</span> ComponentDescriptor&lt;<span class="hljs-built_in">void</span>, <span class="hljs-built_in">void</span>&gt;()
  .attached((c) =&gt; {
    c.subscribe(modeInvalidator);
  })
  .update((c) =&gt; {
    <span class="hljs-keyword">let</span> value: <span class="hljs-built_in">number</span>;
    <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">&quot;a&quot;</span>) {
      value = a;
      c.transientSubscribe(aInvalidator);
    } <span class="hljs-keyword">else</span> {
      value = b;
      c.transientSubscribe(bInvalidator);
    }
    c.sync(c.createVRoot().children(value.toString()));
  });

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (mode === <span class="hljs-string">&quot;a&quot;</span>) {
    a++;
    aInvalidator.invalidate();
    <span class="hljs-keyword">if</span> (a === <span class="hljs-number">10</span>) {
      a = <span class="hljs-number">0</span>;
      mode = <span class="hljs-string">&quot;b&quot;</span>;
      modeInvalidator.invalidate();
    }
  } <span class="hljs-keyword">else</span> {
    b++;
    bInvalidator.invalidate();
    <span class="hljs-keyword">if</span> (b === <span class="hljs-number">10</span>) {
      b = <span class="hljs-number">0</span>;
      mode = <span class="hljs-string">&quot;a&quot;</span>;
      modeInvalidator.invalidate();
    }
  }
  setTimeout(<span class="hljs-number">1000</span>, update);
}
setTimeout(<span class="hljs-number">1000</span>, update);

injectComponent(Main, <span class="hljs-built_in">document</span>.body);
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../advanced/05_events.html" class="navigation navigation-prev " aria-label="Previous page: Events"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../experimental/01_incremental_rendering.html" class="navigation navigation-next " aria-label="Next page: Incremental Rendering"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anker-enable/anker.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/localvoid/kivi/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/localvoid/kivi/"},"ga":{"token":"UA-39594570-5","configuration":"auto"},"anker-enable":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
