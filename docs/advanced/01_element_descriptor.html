<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Element Descriptor | kivi</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../advanced/02_scheduler.html" />
    
    
    <link rel="prev" href="../basics/02_virtual_dom.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="3.1"
        data-chapter-title="Element Descriptor"
        data-filepath="advanced/01_element_descriptor.md"
        data-basepath=".."
        data-revision="Wed Sep 07 2016 14:55:59 GMT+0700 (+07)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01_getting_started.html">
            
                
                    <a href="../01_getting_started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting Started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" >
            
            <span><b>2.</b> Basics</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="basics/01_components.html">
            
                
                    <a href="../basics/01_components.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="basics/02_virtual_dom.html">
            
                
                    <a href="../basics/02_virtual_dom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Virtual DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" >
            
            <span><b>3.</b> Advanced</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="3.1" data-path="advanced/01_element_descriptor.html">
            
                
                    <a href="../advanced/01_element_descriptor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Element Descriptor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="advanced/02_scheduler.html">
            
                
                    <a href="../advanced/02_scheduler.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Scheduler
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="advanced/03_components.html">
            
                
                    <a href="../advanced/03_components.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.3.</b>
                        
                        Components
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="advanced/04_virtual_dom.html">
            
                
                    <a href="../advanced/04_virtual_dom.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Virtual DOM
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="advanced/05_events.html">
            
                
                    <a href="../advanced/05_events.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Events
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="advanced/06_reactive_bindings.html">
            
                
                    <a href="../advanced/06_reactive_bindings.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Reactive Bindings
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" >
            
            <span><b>4.</b> Experimental</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="experimental/01_incremental_rendering.html">
            
                
                    <a href="../experimental/01_incremental_rendering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Incremental Rendering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >kivi</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="element-descriptor">Element Descriptor</h1>
<p>Element Descriptor objects are used to reduce diff overhead by declaring static properties on an ElementDescriptor and
linking virtual nodes with it.</p>
<p>For example:</p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> Header = <span class="hljs-keyword">new</span> ElementDescriptor(<span class="hljs-string">&quot;section&quot;</span>)
  .attrs({
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Header&quot;</span>,
  })
  .className(<span class="hljs-string">&quot;container&quot;</span>);

<span class="hljs-keyword">const</span> vnode = Header.createVNode()
  .style(<span class="hljs-string">&quot;top: 20px&quot;</span>);
</code></pre>
<p>Here we created <code>Header</code> element descriptor with static attributes and class name, and then created a virtual node with
dynamic style. When virtual node will be synced, reconciliation algorithm will perform diff only on style property.</p>
<h2 id="dom-node-cloning">DOM node cloning</h2>
<p>When element has many static properties and there are many instances of this element in application, it is useful to
use DOM node cloning to reduce overhead for creating DOM nodes.</p>
<p>To enable cloning, use <code>descriptor.enableCloning()</code> method, for example:</p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> Header = <span class="hljs-keyword">new</span> ElementDescriptor(<span class="hljs-string">&quot;section&quot;</span>)
  .enableCloning()
  .attrs({
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Header&quot;</span>,
  })
  .className(<span class="hljs-string">&quot;container&quot;</span>);
</code></pre>
<p>Each time when new DOM element represented by this element descriptor is created, it will use internal instance of this
element and clone it using DOM method <code>element.cloneNode(false)</code>.</p>
<h2 id="overriding-default-diff-algorithm">Overriding default diff algorithm</h2>
<p>It is possible to completely override default diff algorithm with <code>updateHandler</code> method and use native DOM operations
to update DOM element.</p>
<p>For example:</p>
<pre><code class="lang-ts"><span class="hljs-keyword">const</span> Header = <span class="hljs-keyword">new</span> ElementDescriptor&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-string">&quot;section&quot;</span>)
  .update((element, oldProps, newProps) =&gt; {
    <span class="hljs-keyword">if</span> (oldProps === <span class="hljs-literal">undefined</span> || oldProps !== newProps) {
      element.style.top = newProps.toString() + <span class="hljs-string">&quot;px&quot;</span>;
    }
  )
  .attrs({
    <span class="hljs-string">&quot;id&quot;</span>: <span class="hljs-string">&quot;Header&quot;</span>,
  })
  .className(<span class="hljs-string">&quot;container&quot;</span>);

Header.createVNode(<span class="hljs-number">10</span>);
</code></pre>
<p>Here we declared props type as a parameteric type for an Element Descriptor, and assigned custom update handler. Custom
update handler receives element, old properties and new properties, when old properties is equal to <code>undefined</code>, it
means that element was created just now, otherwise it should be updated.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../basics/02_virtual_dom.html" class="navigation navigation-prev " aria-label="Previous page: Virtual DOM"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../advanced/02_scheduler.html" class="navigation navigation-next " aria-label="Next page: Scheduler"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-github/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-anker-enable/anker.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/localvoid/kivi/tree/master/docs","label":"Edit This Page"},"github":{"url":"https://github.com/localvoid/kivi/"},"ga":{"token":"UA-39594570-5","configuration":"auto"},"anker-enable":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
